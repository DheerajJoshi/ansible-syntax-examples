---
 - hosts: test
   vars:
     test_match: "lol string"
     list1: 
       - item1
     list2:
       - item1
       - item2
     list3:
       - item3
   tasks:
    - name: "with_items with dictionnary"
      debug: msg="key={{ item.keys().0 }} ** value={{ item.values().0 }}"
      with_items: 
          - key1: value1
          - key2: value2

    - name: Combine 3 list
      debug: msg="{{ list1 | union(list2) | union(list3) }}"
  
    - name: "Hostvars"
      debug: msg="hostvars={{hostvars}}"
    - name: "Hostvars['localhost']"
      debug: msg="hostvars['localhost']={{hostvars['localhost']}}"
    - name: "Hostvars['localbis']"
      debug: msg="hostvars['localbis']={{hostvars['localbis']}}"
    - name: "Vars"
      debug: msg="vars={{vars}}"
    - name: "Groups"
      debug: msg="groups={{groups}}"
    - name: "Environment"
      debug: msg="Environment={{environment}}"
    - name: "inventory_name"
      debug: msg="inventory_name={{vars.inventory_dir.split("/")[-1]}}"     
    - name: "Test match"
      debug: msg="Match={{test_match|match('.*[^o]')}} attended_value=True"
    - name: "Test match 2"
      debug: msg="Match={{test_match|match('.*stri.*')}} attended_value=True"
    - name: "Test match 3"
      debug: msg="Match={{test_match|match('.*nothing.*')}} attended_value=False"

 - hosts: dev_testing
   tasks:
    - name: Test IamIn
      debug: msg="IamIn={{IamIn}} attended_value=dev"
    - name: Test IamDefined
      debug: msg="IamDefined={{IamDefined}} attended_value=yes"

 - hosts: prod_testing
   tasks:
    - name: Test IamIn
      debug: msg="IamIn={{IamIn}} attended_value=prod"
    - name: Test IamDefined
      debug: msg="IamDefined={{IamDefined}} attended_value=yes"
